(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{313:function(e,t,a){e.exports=a(664)},394:function(e,t,a){},663:function(e,t,a){},664:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),l=a(31),s=a(84),o=(a(39),a(11)),m=(a(94),a(3)),u=(a(95),a(33)),d=a(18),p=a.n(d),f=(a(51),a(13)),h=a(38),E=a(27),b=a(666),y=a(667),g=a(284),v=a.n(g),O=a(50).createHashHistory,j=v.a.create({baseURL:"admin/api"});function k(e,t){return j.get(e,{params:t})}function x(e,t){return j.post(e,t)}function w(e,t){return j.put(e,t)}function I(e){return j.delete(e)}j.interceptors.response.use((function(e){return e}),(function(e){(console.log(e.response),e.response.data.message)&&(f.a.error(e.response.data.message),401===e.response.status&&O().push("/login"));return Promise.reject(e)})),j.interceptors.request.use((function(e){return localStorage.token&&(e.headers.Authorization="Bearer "+localStorage.token),e}),(function(e){return Promise.reject(e)}));a(394);var S=function(e){var t=function(){var t=Object(E.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x("/login",Object(h.a)({},a));case 2:n=t.sent,localStorage.token=n.data.token,localStorage.username=n.data.user.username,f.a.success("\u767b\u5f55\u6210\u529f\uff01"),e.history.push("/admin");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-card"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("h1",null,"\u738b\u8005\u8363\u8000")),r.a.createElement(m.a,{name:"normal_login",className:"login-form",onFinish:t},r.a.createElement(m.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(u.a,{prefix:r.a.createElement(b.a,{className:"site-form-item-icon"}),placeholder:"Username"})),r.a.createElement(m.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(u.a,{prefix:r.a.createElement(y.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(m.a.Item,null,r.a.createElement(o.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))))},C=a(108),_=a(109),F=a(111),q=a(110),T=a(112),z=function(e){function t(){return Object(C.a)(this,t),Object(F.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Home")}}]),t}(r.a.Component),N=a(14),K=(a(144),a(37));function L(e){return x("/rest/categories",e)}function P(){return k("/rest/categories")}var U=K.a.Option,H={labelCol:{span:5},wrapperCol:{span:10}},J={wrapperCol:{offset:8,span:16}},V=function(e){console.log("Failed:",e)};var A=Object(s.g)((function(e){var t=m.a.useForm(),a=Object(N.a)(t,1)[0],c=Object(n.useState)([]),i=Object(N.a)(c,2),l=i[0],s=i[1],d=function(){var t=Object(E.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.match.params.id){t.next=7;break}return t.next=3,n=e.match.params.id,r=a,w("/rest/categories/".concat(n),r);case 3:200===t.sent.status?(f.a.success("\u4fee\u6539\u6210\u529f\uff01"),e.history.push("/admin/categorylist")):f.a.error("\u4fee\u6539\u5931\u8d25\uff01"),t.next=11;break;case 7:return t.next=9,L(a);case 9:200===t.sent.status&&(f.a.success("\u6dfb\u52a0\u6210\u529f"),e.history.push("/admin/categorylist"));case 11:case"end":return t.stop()}var n,r}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t;e.match.params.id&&(t=e.match.params.id,k("/rest/categories/".concat(t))).then((function(e){e.data.parent?a.setFieldsValue({name:e.data.name,parent:e.data.parent._id}):a.setFieldsValue({name:e.data.name})})),P().then((function(e){s(e.data)}))}),[]),r.a.createElement(m.a,Object.assign({},H,{onFinish:d,onFinishFailed:V,form:a}),r.a.createElement(m.a.Item,{label:"\u4e0a\u7ea7\u5206\u7c7b",name:"parent"},r.a.createElement(K.a,null,l.map((function(e){return r.a.createElement(U,{key:e._id,value:e._id},e.name)})))),r.a.createElement(m.a.Item,{label:"\u5206\u7c7b\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(u.a,null)),r.a.createElement(m.a.Item,J,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"Submit")))})),D=(a(123),a(61)),Q=(a(124),a(60));var B=function(e){var t=Object(n.useState)([]),a=Object(N.a)(t,2),c=a[0],i=a[1];Object(n.useEffect)((function(){P().then((function(e){i(e.data)}))}),[]);var l=[{title:"\u5e8f\u53f7",render:function(e,t,a){return a+1}},{title:"ID",dataIndex:"_id"},{title:"\u4e0a\u7ea7\u5206\u7c7b",dataIndex:"parent",render:function(e,t,a){return t.parent?t.parent.name:void 0}},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",render:function(t,a,n){return r.a.createElement("div",null,r.a.createElement(o.a,{type:"primary",size:"small",shape:"round",onClick:function(){e.history.push("/admin/editcategory/".concat(a._id))}},"\u4fee\u6539"),r.a.createElement(Q.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9879\u5417\uff1f",onCancel:function(){return f.a.info("\u53d6\u6d88\u5220\u9664")},onConfirm:Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=a._id,I("/rest/categories/".concat(t));case 2:!0===e.sent.data.success&&(f.a.success("\u5220\u9664\u6210\u529f\uff01"),P().then((function(e){i(e.data)})));case 4:case"end":return e.stop()}var t}),e)})))},r.a.createElement(o.a,{type:"danger",size:"small",shape:"round",style:{margin:"0 10px"}},"\u5220\u9664")))}}];return r.a.createElement(D.a,{rowKey:"_id",columns:l,pagination:{pageSize:5,showTotal:function(e){return"\u5171".concat(e,"\u6761")},showQuickJumper:!0},dataSource:c,bordered:!0,stripe:!0})},M=(a(283),a(130)),R=a(668),G=a(669);function W(e){return x("/rest/items",e)}function X(){return k("/rest/items")}var Y={labelCol:{span:5},wrapperCol:{span:10}},Z={wrapperCol:{offset:8,span:16}},$=function(e){console.log("Failed:",e)};var ee=Object(s.g)((function(e){var t=Object(n.useState)(""),a=Object(N.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(N.a)(l,2),d=s[0],b=s[1],y=m.a.useForm(),g=Object(N.a)(y,1)[0],v=function(){var t=Object(E.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.match.params.id){t.next=7;break}return t.next=3,n=e.match.params.id,r=Object(h.a)({},a,{icon:c}),w("/rest/items/".concat(n),r);case 3:200===t.sent.status?(f.a.success("\u4fee\u6539\u6210\u529f\uff01"),e.history.push("/admin/itemlist")):f.a.error("\u4fee\u6539\u5931\u8d25\uff01"),t.next=11;break;case 7:return t.next=9,W(Object(h.a)({},a,{icon:c}));case 9:200===t.sent.status&&(f.a.success("\u6dfb\u52a0\u6210\u529f"),e.history.push("/admin/itemlist"));case 11:case"end":return t.stop()}var n,r}),t)})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var t;e.match.params.id&&(t=e.match.params.id,k("/rest/items/".concat(t))).then((function(e){g.setFieldsValue({name:e.data.name}),i(e.data.icon)}))}),[]);var O=r.a.createElement("div",null,d?r.a.createElement(R.a,null):r.a.createElement(G.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement(m.a,Object.assign({},Y,{onFinish:v,onFinishFailed:$,form:g}),r.a.createElement(m.a.Item,{label:"\u88c5\u5907\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(u.a,null)),r.a.createElement(m.a.Item,{label:"\u88c5\u5907\u56fe\u7247"},r.a.createElement(M.a,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/admin/api/upload",onChange:function(e){return function(e){"uploading"!==e.file.status?"done"===e.file.status&&(b(!1),i(e.file.response.url)):b(!0)}(e)}},c?r.a.createElement("img",{src:c,alt:"avatar",style:{width:"100%"}}):O)),r.a.createElement(m.a.Item,Z,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"Submit")))}));var te=function(e){var t=Object(n.useState)([]),a=Object(N.a)(t,2),c=a[0],i=a[1];Object(n.useEffect)((function(){X().then((function(e){i(e.data)}))}),[]);var l=[{title:"\u5e8f\u53f7",align:"center",render:function(e,t,a){return a+1}},{title:"ID",dataIndex:"_id",width:200,align:"center"},{title:"\u88c5\u5907\u540d\u79f0",dataIndex:"name",width:180,align:"center"},{title:"\u88c5\u5907\u56fe\u7247",dataIndex:"icon",align:"center",render:function(e,t){return r.a.createElement("img",{src:t.icon,alt:"",style:{width:"60px"}})}},{title:"\u64cd\u4f5c",render:function(t,a,n){return r.a.createElement("div",null,r.a.createElement(o.a,{type:"primary",size:"small",shape:"round",onClick:function(){e.history.push("/admin/edititem/".concat(a._id))}},"\u4fee\u6539"),r.a.createElement(Q.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9879\u5417\uff1f",onCancel:function(){return f.a.info("\u53d6\u6d88\u5220\u9664")},onConfirm:Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=a._id,I("/rest/items/".concat(t));case 2:!0===e.sent.data.success&&(f.a.success("\u5220\u9664\u6210\u529f\uff01"),X().then((function(e){i(e.data)})));case 4:case"end":return e.stop()}var t}),e)})))},r.a.createElement(o.a,{type:"danger",size:"small",shape:"round",style:{margin:"0 10px"}},"\u5220\u9664")))}}];return r.a.createElement(D.a,{rowKey:"_id",columns:l,dataSource:c,pagination:{pageSize:5,showTotal:function(e){return"\u5171".concat(e,"\u6761")},showQuickJumper:!0},bordered:!0,stripe:!0})},ae=(a(548),a(202)),ne=(a(549),a(203)),re=(a(550),a(132)),ce=(a(552),a(204)),ie=a(670);function le(e){return x("/rest/heroes",e)}function se(){return k("/rest/heroes")}var oe=K.a.Option,me=u.a.TextArea,ue=ce.a.TabPane,de=[{required:!0}],pe={labelCol:{span:5},wrapperCol:{span:10}},fe={wrapperCol:{offset:8,span:16}},he=function(e){console.log("Failed:",e)};var Ee=Object(s.g)((function(e){var t=m.a.useForm(),a=Object(N.a)(t,1)[0],c=Object(n.useState)(""),i=Object(N.a)(c,2),l=i[0],s=i[1],d=Object(n.useState)(!1),b=Object(N.a)(d,2),y=b[0],g=b[1],v=Object(n.useState)([]),O=Object(N.a)(v,2),j=O[0],x=O[1],I=Object(n.useState)([]),S=Object(N.a)(I,2),C=S[0],_=S[1],F=Object(n.useState)([]),q=Object(N.a)(F,2),T=q[0],z=q[1];Object(n.useEffect)((function(){var t;e.match.params.id&&(t=e.match.params.id,k("/rest/heroes/".concat(t))).then((function(e){if(e.data.scores){a.setFieldsValue(Object(h.a)({},e.data,{},e.data.scores));var t=[];e.data.skills.map((function(e){t.push(e.icon)})),s(e.data.avatar),z(t)}})),P().then((function(e){x(e.data)})),X().then((function(e){_(e.data)}))}),[]);var L=function(){var t=Object(E.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={difficult:a.difficult,skilles:a.skilles,attack:a.attack,survive:a.survive},r=a.skills.map((function(t){return e.match.params.id?("string"!=typeof t.icon&&(t.icon=t.icon.file.response.url),t):(t.icon=t.icon.file.response.url,t)})),a.skills=r,a.scores=n,!e.match.params.id){t.next=11;break}return t.next=7,c=e.match.params.id,i=Object(h.a)({},a,{avatar:l}),w("/rest/heroes/".concat(c),i);case 7:200===t.sent.status&&(f.a.success("\u4fee\u6539\u6210\u529f"),e.history.push("/admin/herolist")),t.next=15;break;case 11:return t.next=13,le(Object(h.a)({},a,{avatar:l}));case 13:200===t.sent.status&&(f.a.success("\u6dfb\u52a0\u6210\u529f"),e.history.push("/admin/herolist"));case 15:case"end":return t.stop()}var c,i}),t)})));return function(e){return t.apply(this,arguments)}}(),U=r.a.createElement("div",null,y?r.a.createElement(R.a,null):r.a.createElement(G.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement(m.a,Object.assign({},pe,{name:"basic",onFinish:L,onFinishFailed:he,form:a}),r.a.createElement(ce.a,{defaultActiveKey:"2"},r.a.createElement(ue,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},r.a.createElement(m.a.Item,{label:"\u82f1\u96c4\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(u.a,null)),r.a.createElement(m.a.Item,{label:"\u82f1\u96c4\u79f0\u53f7",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(u.a,null)),r.a.createElement(m.a.Item,{label:"\u82f1\u96c4\u5206\u7c7b",name:"categories",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b!"}]},r.a.createElement(K.a,{placeholder:"\u8bf7\u9009\u62e9\u82f1\u96c4\u5206\u7c7b",mode:"multiple"},j.map((function(e){return r.a.createElement(oe,{key:e._id,value:e._id},e.name)})))),r.a.createElement(m.a.Item,{label:"\u82f1\u96c4\u5934\u50cf"},r.a.createElement(M.a,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/admin/api/upload",onChange:function(e){return function(e){"uploading"!==e.file.status?"done"===e.file.status&&(g(!1),s(e.file.response.url)):g(!0)}(e)}},l?r.a.createElement("img",{src:l,alt:"avatar",style:{width:"100%"}}):U)),r.a.createElement(m.a.Item,{label:"\u96be\u5ea6",name:"difficult",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(re.a,{count:10})),r.a.createElement(m.a.Item,{label:"\u6280\u80fd",name:"skilles",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(re.a,{count:10})),r.a.createElement(m.a.Item,{label:"\u653b\u51fb",name:"attack",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(re.a,{count:10})),r.a.createElement(m.a.Item,{label:"\u751f\u5b58",name:"survive",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(re.a,{count:10})),r.a.createElement(m.a.Item,{label:"\u987a\u98ce\u51fa\u88c5",name:"items1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u987a\u98ce\u51fa\u88c5!"}]},r.a.createElement(K.a,{placeholder:"\u8bf7\u9009\u62e9\u987a\u98ce\u51fa\u88c5",mode:"multiple"},C.map((function(e){return r.a.createElement(oe,{key:e._id,value:e._id},e.name)})))),r.a.createElement(m.a.Item,{label:"\u9006\u98ce\u51fa\u88c5",name:"items2",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9006\u98ce\u51fa\u88c5!"}]},r.a.createElement(K.a,{placeholder:"\u8bf7\u9009\u62e9\u9006\u98ce\u51fa\u88c5",mode:"multiple"},C.map((function(e){return r.a.createElement(oe,{key:e._id,value:e._id},e.name)})))),r.a.createElement(m.a.Item,{label:"\u4f7f\u7528\u6280\u5de7",name:"usageTips",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f7f\u7528\u6280\u5de7!"}]},r.a.createElement(me,null)),r.a.createElement(m.a.Item,{label:"\u5bf9\u6297\u6280\u5de7",name:"battleTips",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bf9\u6297\u6280\u5de7!"}]},r.a.createElement(me,null)),r.a.createElement(m.a.Item,{label:"\u56e2\u6218\u601d\u8def",name:"teamTips",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u56e2\u6218\u601d\u8def!"}]},r.a.createElement(me,null))),r.a.createElement(ue,{tab:"\u6280\u80fd\u4fe1\u606f",key:"2"},r.a.createElement(m.a.List,{name:"skills"},(function(e,t){var a=t.add,n=t.remove;return r.a.createElement("div",null,r.a.createElement(ae.a,null,e.map((function(e,t){return r.a.createElement(ne.a,{span:12,key:e.key},r.a.createElement(m.a.Item,{name:[e.name,"name"],fieldKey:[e.fieldKey,"name"],rules:de,label:"\u540d\u79f0"},r.a.createElement(u.a,{placeholder:"\u6280\u80fd\u540d\u79f0"})),r.a.createElement(m.a.Item,{name:[e.name,"icon"],fieldKey:[e.fieldKey,"icon"],rules:de,label:"\u6280\u80fd\u56fe\u6807"},r.a.createElement(M.a,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/admin/api/upload",onChange:function(e){return function(e){"uploading"!==e.file.status?"done"===e.file.status&&(g(!1),T.push(e.file.response.url),z(T)):g(!0)}(e)}},T?r.a.createElement("img",{src:T[t],alt:"icon",style:{width:"100%"}}):U)),r.a.createElement(m.a.Item,{name:[e.name,"description"],fieldKey:[e.fieldKey,"description"],rules:de,label:"\u6280\u80fd\u63cf\u8ff0"},r.a.createElement(u.a,{placeholder:"\u6280\u80fd\u63cf\u8ff0"})),r.a.createElement(m.a.Item,{name:[e.name,"tips"],fieldKey:[e.fieldKey,"tips"],rules:de,label:"\u5c0f\u63d0\u793a"},r.a.createElement(u.a,{placeholder:"\u5c0f\u63d0\u793a"})),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{span:8,offset:8},r.a.createElement(ie.a,{className:"dynamic-delete-button",style:{marginBottom:"80px"},onClick:function(){n(e.name)}})," ","\u5220\u9664\u6b64\u6280\u80fd")))}))),r.a.createElement(m.a.Item,null,r.a.createElement(o.a,{type:"dashed",onClick:function(){a()},style:{width:"80%"}},r.a.createElement(G.a,null)," \u6dfb\u52a0\u6280\u80fd")))})))),r.a.createElement(m.a.Item,fe,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"Submit")))}));var be=function(e){var t=Object(n.useState)([]),a=Object(N.a)(t,2),c=a[0],i=a[1];Object(n.useEffect)((function(){se().then((function(e){i(e.data)}))}),[]);var l=[{title:"\u5e8f\u53f7",align:"center",render:function(e,t,a){return a+1}},{title:"ID",dataIndex:"_id",width:200,align:"center"},{title:"\u82f1\u96c4\u540d\u79f0",dataIndex:"name",width:180,align:"center"},{title:"\u82f1\u96c4\u5934\u50cf",dataIndex:"avatar",align:"center",render:function(e,t){return r.a.createElement("img",{src:t.avatar,alt:"",style:{width:"60px"}})}},{title:"\u64cd\u4f5c",render:function(t,a,n){return r.a.createElement("div",null,r.a.createElement(o.a,{type:"primary",size:"small",shape:"round",onClick:function(){e.history.push("/admin/edithero/".concat(a._id))}},"\u4fee\u6539"),r.a.createElement(Q.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9879\u5417\uff1f",onCancel:function(){return f.a.info("\u53d6\u6d88\u5220\u9664")},onConfirm:Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=a._id,I("/rest/heroes/".concat(t));case 2:!0===e.sent.data.success&&(f.a.success("\u5220\u9664\u6210\u529f\uff01"),se().then((function(e){i(e.data)})));case 4:case"end":return e.stop()}var t}),e)})))},r.a.createElement(o.a,{type:"danger",size:"small",shape:"round",style:{margin:"0 10px"}},"\u5220\u9664")))}}];return r.a.createElement(D.a,{rowKey:"_id",columns:l,dataSource:c,pagination:{pageSize:5,showTotal:function(e){return"\u5171".concat(e,"\u6761")},showQuickJumper:!0},bordered:!0,stripe:!0})};function ye(e){return x("/rest/articles",e)}function ge(){return k("/rest/articles")}var ve=a(160),Oe=a.n(ve),je=(a(655),K.a.Option),ke={labelCol:{span:5},wrapperCol:{span:10}},xe={wrapperCol:{offset:8,span:16}},we=function(e){console.log("Failed:",e)};var Ie=Object(s.g)((function(e){var t=m.a.useForm(),a=Object(N.a)(t,1)[0],c=Object(n.useState)([]),i=Object(N.a)(c,2),l=i[0],s=i[1],d=Object(n.useState)(Oe.a.createEditorState(null)),b=Object(N.a)(d,2),y=b[0],g=b[1],v=function(){var t=Object(E.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.body=y.toHTML(),!e.match.params.id){t.next=8;break}return t.next=4,n=e.match.params.id,r=Object(h.a)({},a),w("/rest/articles/".concat(n),r);case 4:200===t.sent.status&&(f.a.success("\u6dfb\u52a0\u6210\u529f"),e.history.push("/admin/articlelist")),t.next=12;break;case 8:return t.next=10,ye(Object(h.a)({},a));case 10:200===t.sent.status&&(f.a.success("\u6dfb\u52a0\u6210\u529f"),e.history.push("/admin/articlelist"));case 12:case"end":return t.stop()}var n,r}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t;e.match.params.id&&(t=e.match.params.id,k("/rest/articles/".concat(t))).then((function(e){a.setFieldsValue(Object(h.a)({},e.data)),g(Oe.a.createEditorState(e.data.body))})),P().then((function(e){s(e.data)}))}),[]),r.a.createElement(m.a,Object.assign({},ke,{name:"basic",onFinish:v,onFinishFailed:we,form:a}),r.a.createElement(m.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",name:"categories"},r.a.createElement(K.a,{placeholder:"\u8bf7\u9009\u62e9\u5206\u7c7b",mode:"multiple"},l.map((function(e){return r.a.createElement(je,{key:e._id,value:e._id},e.name)})))),r.a.createElement(m.a.Item,{label:"\u6587\u7ae0\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898!"}]},r.a.createElement(u.a,null)),r.a.createElement(m.a.Item,{label:"\u6587\u7ae0\u5185\u5bb9",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5185\u5bb9!"}]},r.a.createElement(Oe.a,{value:y,onChange:function(e){return function(e){g(e)}(e)}})),r.a.createElement(m.a.Item,xe,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"Submit")))})),Se=(a(656),a(311));var Ce=function(e){var t=Object(n.useState)([]),a=Object(N.a)(t,2),c=a[0],i=a[1];Object(n.useEffect)((function(){ge().then((function(e){i(e.data)}))}),[]);var l=[{title:"\u5e8f\u53f7",render:function(e,t,a){return a+1}},{title:"ID",dataIndex:"_id"},{title:"\u5206\u7c7b",width:280,align:"center",render:function(e,t,a){return t.categories?r.a.createElement("div",null,t.categories.map((function(e,t){return r.a.createElement(Se.a,{color:"green",key:t},e.name)}))):void 0}},{title:"\u6587\u7ae0\u6807\u9898",dataIndex:"title"},{title:"\u64cd\u4f5c",render:function(t,a,n){return r.a.createElement("div",null,r.a.createElement(o.a,{type:"primary",size:"small",shape:"round",onClick:function(){e.history.push("/admin/editarticle/".concat(a._id))}},"\u4fee\u6539"),r.a.createElement(Q.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9879\u5417\uff1f",onCancel:function(){return f.a.info("\u53d6\u6d88\u5220\u9664")},onConfirm:Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=a._id,I("/rest/articles/".concat(t));case 2:!0===e.sent.data.success&&(f.a.success("\u5220\u9664\u6210\u529f\uff01"),ge().then((function(e){i(e.data)})));case 4:case"end":return e.stop()}var t}),e)})))},r.a.createElement(o.a,{type:"danger",size:"small",shape:"round",style:{margin:"0 10px"}},"\u5220\u9664")))}}];return r.a.createElement(D.a,{rowKey:"_id",columns:l,dataSource:c,pagination:{pageSize:5,showTotal:function(e){return"\u5171".concat(e,"\u6761")},showQuickJumper:!0},bordered:!0,stripe:!0})};function _e(e){return x("/rest/admin_users",e)}function Fe(){return k("/rest/admin_users")}var qe={labelCol:{span:5},wrapperCol:{span:10}},Te={wrapperCol:{offset:8,span:16}},ze=function(e){console.log("Failed:",e)};var Ne=Object(s.g)((function(e){var t=m.a.useForm(),a=Object(N.a)(t,1)[0],c=function(){var t=Object(E.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.match.params.id){t.next=7;break}return t.next=3,n=e.match.params.id,r=Object(h.a)({},a),w("/rest/admin_users/".concat(n),r);case 3:200===t.sent.status&&(f.a.success("\u4fee\u6539\u6210\u529f!"),e.history.push("/admin/userlist")),t.next=11;break;case 7:return t.next=9,_e(Object(h.a)({},a));case 9:200===t.sent.status&&(f.a.success("\u6dfb\u52a0\u6210\u529f"),e.history.push("/admin/userlist"));case 11:case"end":return t.stop()}var n,r}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t;e.match.params.id&&(t=e.match.params.id,k("/rest/admin_users/".concat(t))).then((function(e){a.setFieldsValue({username:e.data.username})}))}),[]),r.a.createElement(m.a,Object.assign({},qe,{name:"basic",onFinish:c,onFinishFailed:ze,form:a}),r.a.createElement(m.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"}]},r.a.createElement(u.a,null)),r.a.createElement(m.a.Item,{label:"\u5bc6\u7801",name:"password"},r.a.createElement(u.a,{type:"password",disabled:!!e.match.params.id})),r.a.createElement(m.a.Item,Te,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"Submit")))}));var Ke=function(e){var t=Object(n.useState)([]),a=Object(N.a)(t,2),c=a[0],i=a[1];Object(n.useEffect)((function(){Fe().then((function(e){i(e.data)}))}),[]);var l=[{title:"\u5e8f\u53f7",align:"center",render:function(e,t,a){return a+1}},{title:"ID",dataIndex:"_id",width:200,align:"center"},{title:"\u7528\u6237\u540d",dataIndex:"username",width:280,align:"center"},{title:"\u64cd\u4f5c",align:"center",render:function(t,a,n){return r.a.createElement("div",null,r.a.createElement(o.a,{type:"primary",size:"small",shape:"round",onClick:function(){e.history.push("/admin/edituser/".concat(a._id))}},"\u4fee\u6539"),r.a.createElement(Q.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9879\u5417\uff1f",onCancel:function(){return f.a.info("\u53d6\u6d88\u5220\u9664")},onConfirm:Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=a._id,I("/rest/admin_users/".concat(t));case 2:!0===e.sent.data.success&&(f.a.success("\u5220\u9664\u6210\u529f\uff01"),Fe().then((function(e){i(e.data)})));case 4:case"end":return e.stop()}var t}),e)})))},r.a.createElement(o.a,{type:"danger",size:"small",shape:"round",style:{margin:"0 10px"}},"\u5220\u9664")))}}];return r.a.createElement(D.a,{rowKey:"_id",columns:l,dataSource:c,pagination:{pageSize:5,showTotal:function(e){return"\u5171".concat(e,"\u6761")},showQuickJumper:!0},bordered:!0,stripe:!0})},Le=[{path:"/login",component:S},{path:"/404",component:function(e){function t(){return Object(C.a)(this,t),Object(F.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"\u9875\u9762\u98de\u8d70\u4e86\u3002\u3002\u3002\u3002\u3002")}}]),t}(r.a.Component)}],Pe=[{path:"/admin",component:z,exact:!0},{path:"/admin/createcategory",component:A},{path:"/admin/editcategory/:id",component:A},{path:"/admin/categorylist",component:B},{path:"/admin/createitem",component:ee},{path:"/admin/edititem/:id",component:ee},{path:"/admin/itemlist",component:te},{path:"/admin/createhero",component:Ee},{path:"/admin/edithero/:id",component:Ee},{path:"/admin/herolist",component:be},{path:"/admin/createarticle",component:Ie},{path:"/admin/editarticle/:id",component:Ie},{path:"/admin/articlelist",component:Ce},{path:"/admin/createuser",component:Ne},{path:"/admin/edituser/:id",component:Ne},{path:"/admin/userlist",component:Ke}],Ue=(a(658),a(205)),He=(a(282),a(26)),Je=(a(661),a(93)),Ve=a(671),Ae=a(672),De=a(673),Qe=a(674),Be=a(675),Me=a(676),Re=Je.a.Header,Ge=Je.a.Content,We=Je.a.Footer,Xe=Je.a.Sider,Ye=He.a.SubMenu;var Ze=Object(s.g)((function(e){var t=Object(n.useState)(!1),a=Object(N.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(e.location.pathname),m=Object(N.a)(s,1)[0],u=Object(n.useState)(e.location.pathname),d=Object(N.a)(u,2),p=d[0],f=d[1],h=Object(n.useState)(""),E=Object(N.a)(h,2),y=E[0],g=E[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("username");g(e)}),[]),r.a.createElement(Je.a,{style:{minHeight:"100vh"}},r.a.createElement(Xe,{collapsible:!0,collapsed:c,onCollapse:function(t){i(t),console.log(e.location)},breakpoint:"sm"},r.a.createElement("div",{className:"logo"}),r.a.createElement(He.a,{theme:"dark",defaultSelectedKeys:["".concat(m)],mode:"inline",onClick:function(e){e.item;var t=e.key;e.keyPath,e.selectedKeys,e.domEvent;f(t)}},r.a.createElement(He.a.Item,{key:"/admin"},r.a.createElement(Ve.a,null),r.a.createElement(l.b,{to:"/admin"},r.a.createElement("span",null,"\u9996\u9875"))),r.a.createElement(Ye,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(Ae.a,null),r.a.createElement("span",null,"\u5206\u7c7b\u7ba1\u7406"))},r.a.createElement(He.a.Item,{key:"/admin/createcategory"},r.a.createElement(l.b,{to:"/admin/createcategory"},"\u65b0\u5efa\u5206\u7c7b")),r.a.createElement(He.a.Item,{key:"/admin/categorylist"},r.a.createElement(l.b,{to:"/admin/categorylist"},"\u5206\u7c7b\u5217\u8868"))),r.a.createElement(Ye,{key:"sub2",title:r.a.createElement("span",null,r.a.createElement(De.a,null),r.a.createElement("span",null,"\u88c5\u5907\u7ba1\u7406"))},r.a.createElement(He.a.Item,{key:"/admin/createitem"},r.a.createElement(l.b,{to:"/admin/createitem"},"\u65b0\u5efa\u88c5\u5907")),r.a.createElement(He.a.Item,{key:"/admin/itemlist"},r.a.createElement(l.b,{to:"/admin/itemlist"},"\u88c5\u5907\u5217\u8868"))),r.a.createElement(Ye,{key:"sub3",title:r.a.createElement("span",null,r.a.createElement(Qe.a,null),r.a.createElement("span",null,"\u82f1\u96c4\u7ba1\u7406"))},r.a.createElement(He.a.Item,{key:"/admin/createhero"},r.a.createElement(l.b,{to:"/admin/createhero"},"\u65b0\u5efa\u82f1\u96c4")),r.a.createElement(He.a.Item,{key:"/admin/herolist"},r.a.createElement(l.b,{to:"/admin/herolist"},"\u82f1\u96c4\u5217\u8868"))),r.a.createElement(Ye,{key:"sub4",title:r.a.createElement("span",null,r.a.createElement(Be.a,null),r.a.createElement("span",null,"\u6587\u7ae0\u7ba1\u7406"))},r.a.createElement(He.a.Item,{key:"/admin/createarticle"},r.a.createElement(l.b,{to:"/admin/createarticle"},"\u65b0\u5efa\u6587\u7ae0")),r.a.createElement(He.a.Item,{key:"/admin/articlelist"},r.a.createElement(l.b,{to:"/admin/articlelist"},"\u6587\u7ae0\u5217\u8868"))),r.a.createElement(Ye,{key:"sub5",title:r.a.createElement("span",null,r.a.createElement(b.a,null),r.a.createElement("span",null,"\u7528\u6237\u7ba1\u7406"))},r.a.createElement(He.a.Item,{key:"/admin/createuser"},r.a.createElement(l.b,{to:"/admin/createuser"},"\u65b0\u5efa\u7528\u6237")),r.a.createElement(He.a.Item,{key:"/admin/userlist"},r.a.createElement(l.b,{to:"/admin/userlist"},"\u7528\u6237\u5217\u8868"))))),r.a.createElement(Je.a,{className:"site-layout"},r.a.createElement(Re,{className:"site-layout-background",style:{padding:0}},r.a.createElement("div",{style:{textAlign:"right",paddingRight:"20px"}},y," ",r.a.createElement(o.a,{type:"primary",size:"small",icon:r.a.createElement(Me.a,null),onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("username"),e.history.push("/login")}},"Logout"))),r.a.createElement(Ge,{style:{margin:"0 16px"}},r.a.createElement(Ue.a,{style:{margin:"16px 0"}},p.split("/",-2).map((function(e,t){return r.a.createElement(Ue.a.Item,{key:t},e)}))),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},e.children)),r.a.createElement(We,{style:{textAlign:"center"}},"\u738b\u8005\u8363\u8000\u7ba1\u7406\u540e\u53f0 \xa92020 Created by ly1994lyy")))})),$e=function(e){function t(){return Object(C.a)(this,t),Object(F.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement(Ze,null,r.a.createElement(s.d,null,Pe.map((function(e){return r.a.createElement(s.b,{key:e.path,path:e.path,exact:e.exact,render:function(t){return r.a.createElement(e.component,t)}})}))))}}]),t}(r.a.Component);a(663);i.a.render(r.a.createElement(l.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/admin",render:function(e){return r.a.createElement($e,e)}}),Le.map((function(e){return r.a.createElement(s.b,Object.assign({key:e.path},e))})),r.a.createElement(s.a,{to:"/404"}),r.a.createElement(s.a,{to:"/login",from:"/"}))),document.getElementById("root"))}},[[313,1,2]]]);
//# sourceMappingURL=main.67e1f498.chunk.js.map